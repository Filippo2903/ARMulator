<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>ARM-Compiler</title>
        <link
            rel="stylesheet"
            type="text/css"
            media="screen"
            href="static/css/style.css" />
        <script
            src="https://kit.fontawesome.com/df57a58519.js"
            crossorigin="anonymous"></script>
        <script
            src="static/js/ace/ace.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script type="text/javascript">
            window.define = window.define || ace.define;
        </script>
        <script
            src="static/js/ace/theme-cobalt.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script
            src="static/js/ace-custom/mode-assembly_arm.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script src="static/js/editablegrid/editablegrid.js"></script>
        <script src="static/js/editablegrid/editablegrid_renderers.js"></script>
        <script src="static/js/editablegrid/editablegrid_editors.js"></script>
        <script src="static/js/editablegrid/editablegrid_validators.js"></script>
        <script src="static/js/editablegrid/editablegrid_utils.js"></script>
        <link
            rel="stylesheet"
            href="static/js/editablegrid/editablegrid.css"
            type="text/css"
            media="screen" />
    </head>

    <body>
        <div id="main-container">
            <div id="message_bar"></div>

            <div id="session-bar">
                <div id="sessions">
                    <div id="new_session">
                        <i class="fa-solid fa-plus fa-sm"></i>
                    </div>
                </div>

                <button id="settings" class="button">Settings</button>

                <div
                    id="config_overlay"
                    class="dialog-overlay"
                    style="display: none">
                    <div
                        id="config_diag"
                        class="config-dialog"
                        onclick="event.stopPropagation();">
                        <h1>Settings</h1>

                        <div class="input-row">
                            <label for="interrupt_active"
                                >Enable interrupts:</label
                            >
                            <label class="ui-switch">
                                <input
                                    type="checkbox"
                                    id="interrupt_active"
                                    name="interrupt_active"
                                    value="activate" />
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="input-row">
                            <label for="interrupt_type">Interrupt type:</label>
                            <select id="interrupt_type" class="config-input">
                                <option value="FIQ">FIQ</option>
                                <option value="IRQ">IRQ</option>
                            </select>
                        </div>

                        <div class="input-row">
                            <label for="interrupt_cycles_first"
                                >First interrupt after:</label
                            >
                            <div class="input-with-unit">
                                <input
                                    id="interrupt_cycles_first"
                                    class="config-input"
                                    type="number"
                                    value="50"
                                    placeholder="e.g. 50" />
                                <span class="unit">cycles</span>
                            </div>
                        </div>

                        <div class="input-row">
                            <label for="interrupt_cycles">Then every:</label>
                            <div class="input-with-unit">
                                <input
                                    id="interrupt_cycles"
                                    class="config-input"
                                    type="number"
                                    value="50"
                                    placeholder="e.g. 50" />
                                <span class="unit">cycles</span>
                            </div>
                        </div>

                        <div class="input-row">
                            <label for="animate_speed"
                                >Execution speed (ms)</label
                            >
                            <input
                                id="animate_speed"
                                class="config-input"
                                type="text"
                                value="0" />
                        </div>

                        <div class="input-row">
                            <label for="language">Language</label>
                            <select id="language" class="config-input">
                                <option value="it">Italiano</option>
                                <option value="en">English</option>
                                <option value="fr">Fran√ßais</option>
                            </select>
                        </div>

                        <div class="config-buttons">
                            <button id="closeConfig" class="button">
                                Close
                            </button>
                            <button id="saveConfig" class="button primary">
                                Save
                            </button>
                        </div>
                    </div>
                </div>

                <div
                    id="delete_overlay"
                    class="dialog-overlay"
                    style="display: none">
                    <div
                        id="delete_diag"
                        class="delete-dialog"
                        onclick="event.stopPropagation();">
                        <h1>Delete session?</h1>
                        <p>
                            You are about to permanently delete this session.<br />
                            <strong>This action cannot be undone.</strong
                            ><br /><br />
                            Do you want to continue?
                        </p>

                        <div class="delete-modal-buttons">
                            <button id="cancel-delete" class="button primary">
                                Cancel
                            </button>
                            <button id="confirm-delete" class="button">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="simulator-container" class="tab-container">
                <ul class="etabs-main">
                    <li class="tab-main">
                        <a href="#tabsmain-simulation">Test</a>
                    </li>
                </ul>

                <div id="tabsmain-simulation">
                    <div id="regView">
                        <div id="tab-container" class="tab-container">
                            <ul class="etabs-reg">
                                <li class="tab-reg">
                                    <a href="#tabs1-User">User</a>
                                </li>
                                <li class="tab-reg">
                                    <a href="#tabs1-FIQ">FIQ</a>
                                </li>
                                <li class="tab-reg">
                                    <a href="#tabs1-IRQ">IRQ</a>
                                </li>
                                <li class="tab-reg">
                                    <a href="#tabs1-SVC">SVC</a>
                                </li>
                            </ul>
                            <div id="tabs1-User" class="border_container_reg">
                                <h4 id="gp-user">General Purpose Registers</h4>
                                <table class="registers">
                                    <thead>
                                        <tr>
                                            <th class="regh_name">Nom</th>
                                            <th class="regh_val">Valeur</th>
                                        </tr>
                                    </thead>
                                    <tr id="user_r0" class="register_row">
                                        <td>R0</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r0"
                                                type="text"
                                                name="r0" />
                                        </td>
                                    </tr>
                                    <tr id="user_r1" class="register_row">
                                        <td>R1</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r1"
                                                type="text"
                                                name="r1" />
                                        </td>
                                    </tr>
                                    <tr id="user_r2" class="register_row">
                                        <td>R2</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r2"
                                                type="text"
                                                name="r2" />
                                        </td>
                                    </tr>
                                    <tr id="user_r3" class="register_row">
                                        <td>R3</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r3"
                                                type="text"
                                                name="r3" />
                                        </td>
                                    </tr>
                                    <tr id="user_r4" class="register_row">
                                        <td>R4</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r4"
                                                type="text"
                                                name="r4" />
                                        </td>
                                    </tr>
                                    <tr id="user_r5" class="register_row">
                                        <td>R5</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r5"
                                                type="text"
                                                name="r5" />
                                        </td>
                                    </tr>
                                    <tr id="user_r6" class="register_row">
                                        <td>R6</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r6"
                                                type="text"
                                                name="r6" />
                                        </td>
                                    </tr>
                                    <tr id="user_r7" class="register_row">
                                        <td>R7</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r7"
                                                type="text"
                                                name="r7" />
                                        </td>
                                    </tr>
                                    <tr id="user_r8" class="register_row">
                                        <td>R8</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r8"
                                                type="text"
                                                name="r8" />
                                        </td>
                                    </tr>
                                    <tr id="user_r9" class="register_row">
                                        <td>R9</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r9"
                                                type="text"
                                                name="r9" />
                                        </td>
                                    </tr>
                                    <tr id="user_r10" class="register_row">
                                        <td>R10</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r10"
                                                type="text"
                                                name="r10" />
                                        </td>
                                    </tr>
                                    <tr id="user_r11" class="register_row">
                                        <td>R11</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r11"
                                                type="text"
                                                name="r11" />
                                        </td>
                                    </tr>
                                    <tr id="user_r12" class="register_row">
                                        <td>R12</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r12"
                                                type="text"
                                                name="r12" />
                                        </td>
                                    </tr>
                                    <tr id="user_r13" class="register_row">
                                        <td>
                                            R13<span class="smaller_font">
                                                (sp)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r13"
                                                type="text"
                                                name="r13" />
                                        </td>
                                    </tr>
                                    <tr id="user_r14" class="register_row">
                                        <td>
                                            R14<span class="smaller_font">
                                                (lr)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r14"
                                                type="text"
                                                name="r14" />
                                        </td>
                                    </tr>
                                    <tr id="user_r15" class="register_row">
                                        <td>
                                            R15<span class="smaller_font">
                                                (pc)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="r15"
                                                type="text"
                                                name="r15" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="tabs1-FIQ" class="border_container_reg">
                                <h4 id="gp-fiq">
                                    Registre G&eacute;n&eacute;raux (FIQ)
                                </h4>
                                <table class="registers">
                                    <thead>
                                        <tr>
                                            <th class="regh_name">Nom</th>
                                            <th class="regh_val">Valeur</th>
                                        </tr>
                                    </thead>
                                    <tr id="fiq_r0" class="register_row">
                                        <td>R0</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r0"
                                                type="text"
                                                name="r0" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r1" class="register_row">
                                        <td>R1</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r1"
                                                type="text"
                                                name="r1" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r2" class="register_row">
                                        <td>R2</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r2"
                                                type="text"
                                                name="r2" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r3" class="register_row">
                                        <td>R3</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r3"
                                                type="text"
                                                name="r3" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r4" class="register_row">
                                        <td>R4</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r4"
                                                type="text"
                                                name="r4" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r5" class="register_row">
                                        <td>R5</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r5"
                                                type="text"
                                                name="r5" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r6" class="register_row">
                                        <td>R6</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r6"
                                                type="text"
                                                name="r6" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r7" class="register_row">
                                        <td>R7</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r7"
                                                type="text"
                                                name="r7" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r8" class="register_row">
                                        <td>
                                            R8<span class="smaller_font">
                                                FIQ</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r8"
                                                type="text"
                                                name="r8" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r9" class="register_row">
                                        <td>
                                            R9<span class="smaller_font">
                                                FIQ</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r9"
                                                type="text"
                                                name="r9" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r10" class="register_row">
                                        <td>
                                            R10<span class="smaller_font">
                                                FIQ</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r10"
                                                type="text"
                                                name="r10" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r11" class="register_row">
                                        <td>
                                            R11<span class="smaller_font">
                                                FIQ</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r11"
                                                type="text"
                                                name="r11" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r12" class="register_row">
                                        <td>
                                            R12<span class="smaller_font">
                                                FIQ</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r12"
                                                type="text"
                                                name="r12" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r13" class="register_row">
                                        <td>
                                            R13<span class="smaller_font">
                                                FIQ (sp)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r13"
                                                type="text"
                                                name="r13" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r14" class="register_row">
                                        <td>
                                            R14<span class="smaller_font">
                                                FIQ (lr)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r14"
                                                type="text"
                                                name="r14" />
                                        </td>
                                    </tr>
                                    <tr id="fiq_r15" class="register_row">
                                        <td>
                                            R15<span class="smaller_font">
                                                (pc)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="FIQ_r15"
                                                type="text"
                                                name="r15" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="tabs1-IRQ" class="border_container_reg">
                                <h4 id="gp-irq">
                                    Registre G&eacute;n&eacute;raux (IRQ)
                                </h4>
                                <table class="registers">
                                    <thead>
                                        <tr>
                                            <th class="regh_name">Nom</th>
                                            <th class="regh_val">Valeur</th>
                                        </tr>
                                    </thead>
                                    <tr id="irq_r0" class="register_row">
                                        <td>R0</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r0"
                                                type="text"
                                                name="r0" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r1" class="register_row">
                                        <td>R1</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r1"
                                                type="text"
                                                name="r1" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r2" class="register_row">
                                        <td>R2</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r2"
                                                type="text"
                                                name="r2" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r3" class="register_row">
                                        <td>R3</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r3"
                                                type="text"
                                                name="r3" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r4" class="register_row">
                                        <td>R4</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r4"
                                                type="text"
                                                name="r4" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r5" class="register_row">
                                        <td>R5</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r5"
                                                type="text"
                                                name="r5" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r6" class="register_row">
                                        <td>R6</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r6"
                                                type="text"
                                                name="r6" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r7" class="register_row">
                                        <td>R7</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r7"
                                                type="text"
                                                name="r7" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r8" class="register_row">
                                        <td>R8</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r8"
                                                type="text"
                                                name="r8" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r9" class="register_row">
                                        <td>R9</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r9"
                                                type="text"
                                                name="r9" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r10" class="register_row">
                                        <td>R10</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r10"
                                                type="text"
                                                name="r10" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r11" class="register_row">
                                        <td>R11</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r11"
                                                type="text"
                                                name="r11" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r12" class="register_row">
                                        <td>R12</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r12"
                                                type="text"
                                                name="r12" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r13" class="register_row">
                                        <td>
                                            R13<span class="smaller_font">
                                                IRQ (sp)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r13"
                                                type="text"
                                                name="r13" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r14" class="register_row">
                                        <td>
                                            R14<span class="smaller_font">
                                                IRQ (lr)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r14"
                                                type="text"
                                                name="r14" />
                                        </td>
                                    </tr>
                                    <tr id="irq_r15" class="register_row">
                                        <td>
                                            R15<span class="smaller_font">
                                                (pc)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="IRQ_r15"
                                                type="text"
                                                name="r15" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="tabs1-SVC" class="border_container_reg">
                                <h4 id="gp-svc">
                                    Registre G&eacute;n&eacute;raux (SVC)
                                </h4>
                                <table class="registers">
                                    <thead>
                                        <tr>
                                            <th class="regh_name">Nom</th>
                                            <th class="regh_val">Valeur</th>
                                        </tr>
                                    </thead>
                                    <tr id="svc_r0" class="register_row">
                                        <td>R0</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r0"
                                                type="text"
                                                name="r0" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r1" class="register_row">
                                        <td>R1</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r1"
                                                type="text"
                                                name="r1" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r2" class="register_row">
                                        <td>R2</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r2"
                                                type="text"
                                                name="r2" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r3" class="register_row">
                                        <td>R3</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r3"
                                                type="text"
                                                name="r3" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r4" class="register_row">
                                        <td>R4</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r4"
                                                type="text"
                                                name="r4" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r5" class="register_row">
                                        <td>R5</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r5"
                                                type="text"
                                                name="r5" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r6" class="register_row">
                                        <td>R6</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r6"
                                                type="text"
                                                name="r6" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r7" class="register_row">
                                        <td>R7</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r7"
                                                type="text"
                                                name="r7" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r8" class="register_row">
                                        <td>R8</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r8"
                                                type="text"
                                                name="r8" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r9" class="register_row">
                                        <td>R9</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r9"
                                                type="text"
                                                name="r9" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r10" class="register_row">
                                        <td>R10</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r10"
                                                type="text"
                                                name="r10" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r11" class="register_row">
                                        <td>R11</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r11"
                                                type="text"
                                                name="r11" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r12" class="register_row">
                                        <td>R12</td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r12"
                                                type="text"
                                                name="r12" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r13" class="register_row">
                                        <td>
                                            R13<span class="smaller_font">
                                                SVC (sp)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r13"
                                                type="text"
                                                name="r13" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r14" class="register_row">
                                        <td>
                                            R14<span class="smaller_font">
                                                SVC (lr)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r14"
                                                type="text"
                                                name="r14" />
                                        </td>
                                    </tr>
                                    <tr id="svc_r15" class="register_row">
                                        <td>
                                            R15<span class="smaller_font">
                                                (pc)</span
                                            >
                                        </td>
                                        <td>
                                            <input
                                                class="regVal formatted_value"
                                                id="SVC_r15"
                                                type="text"
                                                name="r15" />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div id="after-reg">
                                <select id="valueformat">
                                    <option value="hex">
                                        Hexad&eacute;cimal
                                    </option>
                                    <option value="decsign">
                                        D&eacute;cimal (sign&eacute;)
                                    </option>
                                    <option value="dec">
                                        D&eacute;cimal (non-sign&eacute;)
                                    </option>
                                    <option value="bin">Binaire</option>
                                </select>
                            </div>
                        </div>
                        <div class="border_container smaller_font">
                            <h4>&Eacute;tat courant</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>&nbsp;</th>
                                        <th>CPSR</th>
                                        <th id="spsr_title">SPSR</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Negatif (N)</td>
                                        <td>
                                            <button class="flag_btn" name="n">
                                                <input
                                                    class="statusVal pointer"
                                                    id="n"
                                                    type="text"
                                                    name="n"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="sn">
                                                <input
                                                    class="statusVal pointer"
                                                    id="sn"
                                                    type="text"
                                                    name="sn"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Zero (Z)</td>
                                        <td>
                                            <button class="flag_btn" name="z">
                                                <input
                                                    class="statusVal pointer"
                                                    id="z"
                                                    type="text"
                                                    name="z"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="sz">
                                                <input
                                                    class="statusVal pointer"
                                                    id="sz"
                                                    type="text"
                                                    name="sz"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Retenue (C)</td>
                                        <td>
                                            <button class="flag_btn" name="c">
                                                <input
                                                    class="statusVal pointer"
                                                    id="c"
                                                    type="text"
                                                    name="c"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="sc">
                                                <input
                                                    class="statusVal pointer"
                                                    id="sc"
                                                    type="text"
                                                    name="sc"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>D&eacute;passement (V)</td>
                                        <td>
                                            <button class="flag_btn" name="v">
                                                <input
                                                    class="statusVal pointer"
                                                    id="v"
                                                    type="text"
                                                    name="v"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="sv">
                                                <input
                                                    class="statusVal pointer"
                                                    id="sv"
                                                    type="text"
                                                    name="sv"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Ignore IRQ</td>
                                        <td>
                                            <button class="flag_btn" name="i">
                                                <input
                                                    class="statusVal pointer"
                                                    id="i"
                                                    type="text"
                                                    name="i"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="si">
                                                <input
                                                    class="statusVal pointer"
                                                    id="si"
                                                    type="text"
                                                    name="si"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Ignore FIQ</td>
                                        <td>
                                            <button class="flag_btn" name="f">
                                                <input
                                                    class="statusVal pointer"
                                                    id="f"
                                                    type="text"
                                                    name="f"
                                                    readonly />
                                            </button>
                                        </td>
                                        <td>
                                            <button class="flag_btn" name="sf">
                                                <input
                                                    class="statusVal pointer"
                                                    id="sf"
                                                    type="text"
                                                    name="sf"
                                                    readonly />
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="editorPanel">
                        <div id="editorTopBar">
                            <div id="simulationTitle">Simulation</div>
                            <div id="debugger_buttons">
                                <button id="assemble" class="button primary">
                                    Assemble
                                </button>

                                <button
                                    onclick="reset()"
                                    id="reset"
                                    class="button"
                                    disable="disabled">
                                    Reset
                                </button>

                                <button
                                    id="run"
                                    onclick="simulate('run')"
                                    disable="disabled"
                                    class="button">
                                    <i class="fa-solid fa-eject"></i>
                                </button>

                                <button
                                    id="stepback"
                                    onclick="simulate('stepback')"
                                    disable="disabled"
                                    class="button">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </button>

                                <button
                                    id="stepforward"
                                    onclick="simulate('stepforward')"
                                    disable="disabled"
                                    class="button">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </button>

                                <button
                                    id="stepout"
                                    onclick="simulate('stepout')"
                                    disable="disabled"
                                    class="button">
                                    <i class="fa-solid fa-arrow-turn-up"></i>
                                </button>

                                <button
                                    id="stepin"
                                    onclick="simulate('stepinto')"
                                    disable="disabled"
                                    class="button">
                                    <i class="fa-solid fa-arrow-turn-up"></i>
                                </button>
                            </div>
                        </div>
                        <div id="editor">{{ code }}</div>
                    </div>

                    <div id="dashboard">
                        <div class="border_container">
                            <h4>Current Instruction</h4>
                            <div id="disassembly"></div>
                        </div>
                        <div class="border_container">
                            <h4>M&eacute;moire</h4>
                            <div id="memoryview"></div>
                            <div id="paginator"></div>
                            <input
                                type="checkbox"
                                id="follow_pc"
                                checked="checked" />Suivre PC<br />
                            Cycle courant :
                            <input id="cycles_count" type="text" value="0" />
                        </div>
                        <div>
                            <br />
                            <div style="float: left">
                                <input
                                    type="file"
                                    onchange="loadFileAsText()"
                                    id="fileToLoad"
                                    style="display: none" />
                                <label for="fileToLoad" class="flat_button"
                                    >Upload</label
                                >
                            </div>
                            <div style="float: right">
                                <button onclick="saveTextAsFile()">
                                    Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.addEventListener("DOMContentLoaded", () => {
                if (
                    !document.cookie
                        .split(";")
                        .some((item) => item.trim().startsWith("lang="))
                ) {
                    document.cookie = "lang=en; path=/; SameSite=Lax";
                }
            });

            var editor = ace.edit("editor");
            var assembly_armMode = ace.require("ace/mode/assembly_arm").Mode;

            editor.getSession().setMode(new assembly_armMode());
            editor.$blockScrolling = Infinity;
            editor.setShowPrintMargin(false);

            // Remove shortcuts used by the simulator
            editor.commands.bindKey("Ctrl-Up", null);
            editor.commands.bindKey("Cmd-Up", null);
            editor.commands.bindKey("Ctrl-Left", null);
            editor.commands.bindKey("Cmd-Left", null);
            editor.commands.bindKey("Ctrl-Right", null);
            editor.commands.bindKey("Cmd-Right", null);
            editor.commands.bindKey("Ctrl-Down", null);
            editor.commands.bindKey("Cmd-Down", null);
        </script>

        <script
            src="static/js/jquery-1.11.1.min.js"
            type="text/javascript"
            charset="utf-8"></script>

        <script
            src="static/js/tooltipster/js/jquery.tooltipster.min.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script
            src="static/js/jquery.easytabs.min.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script
            src="static/js/jquery.easing.min.js"
            type="text/javascript"
            charset="utf-8"></script>
        <link
            rel="stylesheet"
            type="text/css"
            href="static/js/tooltipster/css/tooltipster.css" />
        <script
            src="static/js/comm.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script
            src="static/js/helpers.js"
            type="text/javascript"
            charset="utf-8"></script>

        <script type="text/javascript">
            var blockSelect = 0;
            var selectLine = -1;

            $("#simulator-container").easytabs({
                animate: false,
            });

            // Onglets des registres
            $("#tab-container").easytabs({
                animate: false,
            });

            // Barre de messages
            $("#message_bar").click(function () {
                $(this).slideToggle("normal", "easeInOutBack", function () {});
            });

            $("#assemble").click(function () {
                assemble();
            });

            $(document).ready(function () {
                $(".register_row").click(function (e) {
                    var mode = "";
                    if (e.ctrlKey || e.metaKey) {
                        $(this).toggleClass("reg_bkp_w");
                    }
                    if (e.shiftKey) {
                        $(this).toggleClass("reg_bkp_r");
                    }
                    if (!(e.ctrlKey || e.metaKey || e.shiftKey)) {
                        return;
                    }

                    if ($(this).hasClass("reg_bkp_w")) {
                        mode = mode + "w";
                    }
                    if ($(this).hasClass("reg_bkp_r")) {
                        mode = mode + "r";
                    }

                    sendData([
                        "update",
                        "bp_" + mode + "_" + $(this).attr("id"),
                    ]);

                    clearSelection();
                });

                function openConfigDialog() {
                    $("#config_overlay").fadeIn(150, function () {
                        $("#language option").each(function (_, option) {
                            if (option.value === getLang()) {
                                option.selected = true;
                            }
                        });
                        $("body").css("overflow", "hidden");
                    });
                }

                function closeConfigDialog() {
                    $("#config_overlay").fadeOut(150, function () {
                        setLang($("#language").val());
                        $("body").css("overflow", "");
                    });
                }

                $("#config_overlay").on("click", function (e) {
                    if (e.target.id === "config_overlay") {
                        closeConfigDialog();
                    }
                });

                function saveConfig() {
                    setLang($("#language").val());
                    closeConfigDialog();
                }

                $("#settings").on("click", openConfigDialog);
                $("#saveConfig").on("click", saveConfig);
                $("#closeConfig").on("click", closeConfigDialog);

                let sessionToDelete = null;

                function openDeleteDialog(index) {
                    sessionToDelete = index;
                    $("#delete_overlay").fadeIn(150, function () {
                        $("body").css("overflow", "hidden");
                    });
                }

                function closeDeleteDialog() {
                    $("#delete_overlay").fadeOut(150, function () {
                        $("body").css("overflow", "");
                    });
                }

                $("#delete_overlay").on("click", function (e) {
                    if (e.target.id === "delete_overlay") {
                        closeDeleteDialog();
                    }
                });

                $("#cancel-delete").on("click", function () {
                    closeDeleteDialog();
                });

                $("#confirm-delete").on("click", function () {
                    if (sessionToDelete !== null) {
                        performDeleteSession(sessionToDelete);
                        sessionToDelete = null;
                    }
                    closeDeleteDialog();
                });

                $(document).on("click", ".delete_session", function () {
                    const index = parseInt($(this).data("session-index"));
                    openDeleteDialog(index);
                });

                editor.setHighlightGutterLine(false);

                editor.on("guttermousedown", function (e) {
                    var target = e.domEvent.target;
                    if (target.className.indexOf("ace_gutter-cell") == -1)
                        return;

                    var row = e.getDocumentPosition().row;
                    var index = $.inArray(row, asm_breakpoints);
                    if (index >= 0) {
                        asm_breakpoints.splice(index, 1);
                        editor.session.clearBreakpoint(row);
                    } else {
                        asm_breakpoints.push(row);
                        if ($("#assemble").text() == "Start") {
                            editor.session.setBreakpoint(row);
                        }
                    }

                    if ($("#assemble").text() == "Stop") {
                        sendBreakpointsInstr();
                    }

                    blockSelect = blockSelect + 1;
                    selectLine = row;
                    setTimeout(function () {
                        blockSelect = blockSelect - 1;
                    }, 500);
                });

                editor.on("changeSelection", function (e) {
                    var cur_row = editor.getCursorPosition()["row"];
                    $(".mem_mousehighlight").removeClass("mem_mousehighlight");
                    if (cur_row in line2addr) {
                        mouse_highlight_mem = line2addr[cur_row];
                    }
                    updateMemoryBreakpointsView();

                    if (blockSelect > 0) {
                        editor.selection.setSelectionRange({
                            start: {
                                row: selectLine,
                                column: selectLine,
                            },
                            end: {
                                row: selectLine,
                                column: selectLine,
                            },
                        });
                    }
                });

                editor.on("change", function (e) {
                    if (debug_marker !== null) {
                        editor.session.removeMarker(debug_marker);
                    }
                    resetView();
                    var end_row = e.end.row;
                    var start_row = e.start.row;
                    if (end_row != start_row) {
                        editor.session.clearBreakpoints();
                        for (var i = asm_breakpoints.length - 1; i >= 0; i--) {
                            var row = asm_breakpoints[i];
                            if (e.action == "insert") {
                                if (
                                    row > start_row ||
                                    (row == start_row && e.start.column == 0)
                                ) {
                                    asm_breakpoints[i] =
                                        row + end_row - start_row;
                                }
                            } else {
                                if (
                                    (row > start_row ||
                                        (row == start_row &&
                                            e.start.column == 0)) &&
                                    (row < end_row ||
                                        (row == end_row && e.end.column > 0))
                                ) {
                                    asm_breakpoints.splice(i, 1);
                                } else if (row > start_row) {
                                    asm_breakpoints[i] =
                                        row + start_row - end_row;
                                }
                            }
                        }
                        refreshBreakpoints();
                    }
                });

                $("#interrupt_type").change(function () {
                    if (document.getElementById("interrupt_active").checked) {
                        sendData([
                            "interrupt",
                            true,
                            $("#interrupt_type").val(),
                            parseInt($("#interrupt_cycles").val()),
                            parseInt($("#interrupt_cycles_first").val()),
                        ]);
                    }
                });

                $("#interrupt_active").change(function () {
                    if (this.checked) {
                        sendData([
                            "interrupt",
                            true,
                            $("#interrupt_type").val(),
                            parseInt($("#interrupt_cycles").val()),
                            parseInt($("#interrupt_cycles_first").val()),
                        ]);
                    } else {
                        sendData([
                            "interrupt",
                            false,
                            $("#interrupt_type").val(),
                            parseInt($("#interrupt_cycles").val()),
                            parseInt($("#interrupt_cycles_first").val()),
                        ]);
                    }
                });

                $("input[type=text]:not(.session_name)").change(function () {
                    var objid = $(this).attr("id");
                    if (objid == "animate_speed") {
                        return;
                    }

                    if (
                        objid == "interrupt_active" ||
                        objid == "interrupt_cycles" ||
                        objid == "interrupt_cycles_first"
                    ) {
                        if (
                            document.getElementById("interrupt_active").checked
                        ) {
                            sendData([
                                "interrupt",
                                true,
                                $("#interrupt_type").val(),
                                parseInt($("#interrupt_cycles").val()),
                                parseInt($("#interrupt_cycles_first").val()),
                            ]);
                        }
                        return;
                    }

                    target_val = $(this).val();

                    if ($.inArray("formatted_value", this.classList) >= 0) {
                        // Convert to hex if from another format
                        format_ = $("#valueformat").val();
                        if (format_ == "dec") {
                            target_val = parseInt(target_val).toString(16);
                        } else if (format_ == "decsign") {
                            target_val = parseInt(target_val);
                            if (target_val < 0) {
                                target_val = target_val + Math.pow(2, 32);
                            }
                            target_val = target_val.toString(16);
                        } else if (format_ == "bin") {
                            target_val = parseInt(target_val, 2).toString(16);
                        } else if (format_ == "hex") {
                            target_val = parseInt(target_val, 16).toString(16);
                        }
                    }

                    if ("NaN" === target_val) {
                        $(this).val("0");
                        target_val = "0";
                    }

                    sendData(["update", $(this).attr("id"), target_val]);
                });

                $(".flag_btn").click(function () {
                    if (!$("input", this).prop("disabled")) {
                        sendData(["update", $(this).attr("name")]);
                    }
                });

                // Help buttons
                $("#stepback").tooltipster({
                    content: "Step back to previous instruction",
                    position: "bottom",
                });
                $("#run").tooltipster({
                    content: "Run",
                    position: "bottom",
                });
                $("#stepin").tooltipster({
                    content: "Execute current instruction",
                    position: "bottom",
                });
                $("#stepforward").tooltipster({
                    content: "Step over current line",
                    position: "bottom",
                });
                $("#stepout").tooltipster({
                    content: "Finish current function",
                    position: "bottom",
                });

                var previous_format = "hex";
                $("#valueformat").change(function () {
                    $(".formatted_value").each(function () {
                        format_ = $("#valueformat").val();
                        target_val = NaN;

                        if (
                            previous_format == "dec" ||
                            previous_format == "decsign"
                        ) {
                            target_val = parseInt($(this).val());
                        } else if (previous_format == "bin") {
                            target_val = parseInt($(this).val(), 2);
                        } else if (previous_format == "hex") {
                            target_val = parseInt($(this).val(), 16);
                        }

                        if (target_val < 0) {
                            target_val = target_val + Math.pow(2, 32);
                        }

                        if (isNaN(target_val)) {
                            return;
                        }

                        if (format_ == "dec") {
                            $(this).val(target_val.toString());
                        } else if (format_ == "decsign") {
                            if (target_val > Math.pow(2, 31) - 1) {
                                target_val = target_val - Math.pow(2, 32);
                            }
                            $(this).val(target_val.toString());
                        } else if (format_ == "bin") {
                            $(this).val(target_val.toString(2));
                        } else if (format_ == "hex") {
                            $(this).val(
                                formatHexUnsigned32Bits(target_val).slice(2)
                            );
                        }
                    });
                    previous_format = $("#valueformat").val();
                });

                disableSim();
            });
        </script>
        <script
            src="static/js/memory_viewer.js"
            type="text/javascript"
            charset="utf-8"></script>
        <script
            src="static/js/sessionHandler.js"
            type="text/javascript"
            charset="utf-8"></script>
    </body>
</html>
